<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>I'm learning devops, and it's amaziiiiiiing!!!!</h1>
    <h3>
      What I learned so far:
      <ul>
        <li>Launching an EC2 instance on AWS</li>
        <li>Connecting to the instance using SSH</li>
        <li>Installing and running Jenkins on the instance</li>
        <li>Creating a pipeline</li>
        <li>Installing and running Docker on the instance</li>
        <li>Creating a Dockerfile</li>
        <li>Building a Docker image</li>
        <li>
          Running a Docker container whenever a new commit is pushed to the repo
        </li>
      </ul>
    </h3>

    <h4>Update 25 Feb 2023</h4>
    <p>
      A lot of things happened in the last 2 days.
      <br />
      I'm still learning, but I'm getting there. I had 2 old PCs. I installed
      Fedora server on both, and enabled ssh. They're currently running on my
      desk, and I'm using them as servers.
      <br />
      I installed Jenkins and Docker on one of them, and I'm using it to build
      and deploy my app.
      <br />
      So far I learned how to how to use Jenkins to build an image of my app.
      <br />
      The exiting part is that the image uses a custom image as a base. The
      custom image includes all the dependencies that my app needs to run. This
      should make the build process faster. And the even more exiting part is
      that I'm using Jenkins to build the update the base image whenever it's
      changed;

      <br />
      All this in a multi-branch pipeline.

      <br />

      The next step is to use my other pc to get the built image from the registry and run it as a container.

      That is easy, but it must be automated. And for some reason I don't want to connect to the other pc with Jenkins.
      <br>
      It just feels wrong. 
      I must automate this on the second PC.
    </p>

    <h4>Update 27 Feb 2023</h4>
    <p>
      I managed to automate the process of building the base image, and pushing it to the registry.
      <br>
      I also managed to automate the process of pulling the image from the registry, and running it as a container.
      <br>
      This caused me some trouble because I decided to use watchtower to update the container whenever a new image is pushed to the registry.
      But the watchtower container didn't stop until I used the --privileged flag, for some reason. 
      <br>
      Now I have a fully automated pipeline that builds, tests, and deploys my app.
      <br>
      I'm facing one issue with my public ip. Well, I don't have a static ip. Actually it's a very dynamic one. It changes every few hours, so if I really want to run stuff on my broken PCs, I need to get one. 
      <br>
      Unless...<br>
      I could run an ec2 instance on AWS with a database and a web server. My pc would send a request to the web server, and it would save the ip in the database. 
      <br>
      Then, I can use the ip of the web server for github webhooks, and that would redirect the request to my pc.
      <br>
      It would be easier to use a static ip, but my idea is more exciting.
      

    </p>

    <button>Test api</button>
  </body>
  <script>
    const button = document.querySelector("button");
    button.addEventListener("click", () => {
      fetch("/hello")
        .then((res) => res.text())
        .then((data) => alert(`Response from server: ${data}`));
    });
  </script>
</html>
